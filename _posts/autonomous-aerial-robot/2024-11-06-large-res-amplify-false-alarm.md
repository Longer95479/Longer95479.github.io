---
layout: post
title:  "Large Resolution will Amplify False Alarm of Occupy Map"
date:   2024-11-06 13:00:00 +0800
tags: 
    - autonomous aerial robot
    - map
    - plan
categories:
    - autonomous aerial robot
---

当无人机的可活动区域变大后，若保持分辨率不变，则 ego planner 里预先开辟的地图将会占据很大的内存，因此需要增大分辨率，来抵消一部分地图扩大带来的内存消耗。然而，这会给规划端带来一些挑战。

ego planner 的栅格地图的占据信息来自于 realsense 的深度图像，而深度值是存在有效范围的，如 D435 的理想范围是 0.3 m 到 3 m。即使是在理想深度测量范围内，也是有噪声的存在，而这个噪声则会体现在栅格地图中突然出现的障碍上。而 ego planner 是用于避障的，虚警的障碍会让规划的轨迹扭曲，增大无人机飞行控制的难度、里程计崩溃的概率。

通过增大深度滤波器的最小合法深度值，解决了因深度噪声、较大栅格体积共同造成的大虚警障碍，导致的轨迹规划过于扭曲甚至陷入障碍物的问题，目前可在室内使用 1 m 分辨率的栅格地图进行规划，室外测试也正常。带来的代价则是狭小区域内的避障能力的下降。

更彻底的解决办法是，不要使用那么小的分辨率，同时又想要节省内存，那么使用 oct 地图，或者将地图存在硬盘里，只加载当前位置周围的地图到内存中。 
